import{_ as a,c as i,o as e,ag as t}from"./chunks/framework.ko2zIC2c.js";const n="/assets/systemd-framework.Bou-5jOF.svg",y=JSON.parse('{"title":"Systemd","description":"","frontmatter":{},"headers":[],"relativePath":"development/linux/advanced/systemd/systemd.md","filePath":"development/linux/advanced/systemd/systemd.md","lastUpdated":1744689004000}'),p={name:"development/linux/advanced/systemd/systemd.md"};function l(d,s,r,h,o,c){return e(),i("div",null,s[0]||(s[0]=[t('<h1 id="systemd" tabindex="-1">Systemd <a class="header-anchor" href="#systemd" aria-label="Permalink to &quot;Systemd&quot;">​</a></h1><h2 id="systemd-gai-shu" tabindex="-1">Systemd 概述 <a class="header-anchor" href="#systemd-gai-shu" aria-label="Permalink to &quot;Systemd 概述&quot;">​</a></h2><h3 id="systemd-jian-jie" tabindex="-1">Systemd 简介 <a class="header-anchor" href="#systemd-jian-jie" aria-label="Permalink to &quot;Systemd 简介&quot;">​</a></h3><p>Systemd 是一个系统和服务管理器，用于 Linux 操作系统。它旨在提供一种统一且高性能的方式来管理服务和系统的其他方面。以下是一些 Systemd 的关键组件和特性：</p><ul><li>初始化系统：Systemd 作为一个初始化系统，取代了传统的 SysV 或 Upstart 初始化系统。它负责启动和关闭系统，以及在正常运行期间管理进程。</li><li>服务管理：Systemd 使用称为“单元”的概念来管理服务，这些服务可以通过诸如 systemctl 这样的命令进行启用、禁用、启动、停止和查询。</li><li>依赖性和并行化：与传统 init 脚本不同，Systemd 可以并行启动服务，利用多核 CPU 的优势，并更高效地处理服务之间的依赖关系。</li><li>日志记录：Systemd 包含了一个日志记录系统，可以记录程序和服务的消息。这些日志以二进制格式存储在磁盘上，可以通过 journalctl 命令访问，并提供了高级过滤选项。</li><li>套接字激活：服务可以根据监听套接字被激活，而不是先启动然后等待连接。这可以减少资源使用。</li><li>定时器单元：服务可以配置为在特定时间或间隔运行，类似于 cron 作业，但具有额外的功能和灵活性。</li><li>挂载和交换管理：Systemd 可以管理文件系统的挂载点和交换分区，确保它们在需要时可用。</li><li>网络配置：通过与 NetworkManager 或其他工具的集成，Systemd 可以处理网络配置并启动网络接口。</li><li>用户会话：Systemd 还可以管理用户的本地和远程会话，允许每个用户的服务和资源控制。</li><li>资源控制：Systemd 可以限制服务使用的资源（如 CPU、内存、I/O），帮助防止失控的进程消耗过多的系统资源。</li></ul><p><img src="'+n+`" alt="systemd 架构"></p><h2 id="systemd-ming-ling" tabindex="-1">Systemd 命令 <a class="header-anchor" href="#systemd-ming-ling" aria-label="Permalink to &quot;Systemd 命令&quot;">​</a></h2><h2 id="systemd-ying-yong" tabindex="-1">Systemd 应用 <a class="header-anchor" href="#systemd-ying-yong" aria-label="Permalink to &quot;Systemd 应用&quot;">​</a></h2><h3 id="shi-yong-systemd-lai-guan-li-frps-fu-wu" tabindex="-1">使用 systemd 来管理 frps 服务 <a class="header-anchor" href="#shi-yong-systemd-lai-guan-li-frps-fu-wu" aria-label="Permalink to &quot;使用 systemd 来管理 frps 服务&quot;">​</a></h3><p>在 Linux 系统下，使用 systemd 可以方便地控制 frps 服务端的启动、停止、配置后台运行以及开机自启动。</p><p>在 <code>/etc/systemd/system</code> 下创建 <code>frps.service</code> 用于配置 frps 服务</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system/frps.service</span></span></code></pre></div><p>写入内容</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span># 服务名称，可自定义</span></span>
<span class="line"><span>Description = frp server</span></span>
<span class="line"><span>After = network.target syslog.target</span></span>
<span class="line"><span>Wants = network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type = simple</span></span>
<span class="line"><span># 启动frps的命令，需修改为您的frps的安装路径</span></span>
<span class="line"><span>ExecStart = /path/to/frps -c /path/to/frps.toml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy = multi-user.target</span></span></code></pre></div><p>使用 systemd 命令管理 frps 服务</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   frps</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 启动 frp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    frps</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 停止 frp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frps</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 重启 frp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  frps</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 查看 frp 状态</span></span></code></pre></div><p>设置 frps 开机自启动</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frps</span></span></code></pre></div><p>通过遵循上述步骤，您可以轻松地使用 systemd 来管理 frps 服务，实现启动、停止、自动运行和开机自启动。确保替换路径和配置文件名称以匹配您的实际安装。</p><h2 id="can-kao-zi-liao" tabindex="-1">参考资料 <a class="header-anchor" href="#can-kao-zi-liao" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><p>[1] <span id="tutorial-tencentcloud-1516125"></span> <a href="https://cloud.tencent.com/developer/article/1516125" target="_blank" rel="noreferrer">可能是史上最全面易懂的 Systemd 服务管理教程！- 腾讯云 | 开发者社区</a></p></li><li><p>[2] <span id="docs-frp-systemd"></span> <a href="https://gofrp.org/zh-cn/docs/setup/systemd/" target="_blank" rel="noreferrer">使用 systemd | frp</a></p></li></ul>`,21)]))}const m=a(p,[["render",l]]);export{y as __pageData,m as default};
