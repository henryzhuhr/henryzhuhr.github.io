import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.ko2zIC2c.js";const c=JSON.parse('{"title":"Ubuntu Go","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"development/linux/distributions/ubuntu-install/ubuntu-go.md","filePath":"development/linux/distributions/ubuntu-install/ubuntu-go.md","lastUpdated":1744689004000}'),t={name:"development/linux/distributions/ubuntu-install/ubuntu-go.md"};function l(h,s,p,d,k,o){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ubuntu-go" tabindex="-1">Ubuntu Go <a class="header-anchor" href="#ubuntu-go" aria-label="Permalink to &quot;Ubuntu Go&quot;">​</a></h1><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p></p><ul><li>一些 Ubuntu 使用小技巧，同样适用于其他 Linux 发行版本。</li><li>对于 💻 MacOS 来说，很多操作都是一样的，但是请不要随便修改 Mac 下的用户权限，也不要随意操作 sudo ，否则就得跑一趟 Apple Store 了，如果这种不幸真的发生了，请从 <a href="https://getsupport.apple.com/products" target="_blank" rel="noreferrer">Apple 支持</a> 预约 <a href="https://www.apple.com.cn/retail/geniusbar/" target="_blank" rel="noreferrer">Genius Bar 天才吧</a> 的天才们吧</li></ul></div><p>【目录导航】</p><ul><li><a href="#software-package-management">📥 软件包管理</a></li><li><a href="#useful-scripts">🛠️ 常用脚本</a></li></ul><h2 id="ruan-jian-bao-guan-li" tabindex="-1">📥 软件包管理 <a class="header-anchor" href="#ruan-jian-bao-guan-li" aria-label="Permalink to &quot;📥 软件包管理&quot;">​</a></h2><span id="software-package-management"></span><h3 id="bu-tong-xi-tong-de-ruan-jian-bao-guan-li" tabindex="-1">不同系统的软件包管理 <a class="header-anchor" href="#bu-tong-xi-tong-de-ruan-jian-bao-guan-li" aria-label="Permalink to &quot;不同系统的软件包管理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Linux 发行版本</th><th>软件包管理器</th><th>安装软件包命令</th></tr></thead><tbody><tr><td><strong>Debian/Ubuntu</strong></td><td><code>apt</code></td><td><code>sudo apt install &lt;package&gt;</code></td></tr><tr><td><strong>Ubuntu</strong> (夹带私货)</td><td><code>snap</code></td><td><code>snap install &lt;package&gt;</code></td></tr><tr><td><strong>CentOS/RHEL</strong></td><td><code>yum</code></td><td><code>sudo yum install &lt;package&gt;</code></td></tr><tr><td><strong>Fedora</strong></td><td><code>dnf</code></td><td><code>sudo dnf install &lt;package&gt;</code></td></tr><tr><td><strong>Arch</strong></td><td><code>pacman</code></td><td><code>sudo pacman -S &lt;package&gt;</code></td></tr><tr><td><strong>SUSE</strong></td><td><code>zypper</code></td><td><code>sudo zypper install &lt;package&gt;</code></td></tr></tbody></table><h3 id="ubuntu-apt" tabindex="-1">Ubuntu apt <a class="header-anchor" href="#ubuntu-apt" aria-label="Permalink to &quot;Ubuntu apt&quot;">​</a></h3><p><code>apt</code> 是 Ubuntu 的软件包管理器，用于安装、升级和删除软件包。</p><p><code>apt</code> 是 <code>apt-get</code> 和 <code>apt-cache</code> 的组合，提供了更多的功能和选项。</p><h2 id="huan-jing-bian-liang" tabindex="-1">🏖️ 环境变量 <a class="header-anchor" href="#huan-jing-bian-liang" aria-label="Permalink to &quot;🏖️ 环境变量&quot;">​</a></h2><h3 id="ru-he-cha-kan-huan-jing-bian-liang" tabindex="-1">如何查看环境变量 <a class="header-anchor" href="#ru-he-cha-kan-huan-jing-bian-liang" aria-label="Permalink to &quot;如何查看环境变量&quot;">​</a></h3><p>查看环境变量有三个命令：</p><ul><li><code>env</code>: 列出所有的环境变量</li><li><code>export</code>: 列出所有的环境变量，但 export 可以指定列出某一环境变量</li><li><code>echo $PATH</code>: 列出指定变量，例如列出变量 <code>PATH</code> 的值，里面包含了已添加的目录。</li></ul><p>有一些十分有用的环境变量，例如</p><ul><li><code>USER</code>: 当前登陆用户，例如 <code>ubuntu</code>。</li><li><code>HOME</code>: 当前登陆用户的用户目录，例如等价于 <code>/home/ubuntu</code>。</li><li><code>PWD</code>: 当前工作目录</li></ul><h3 id="she-zhi-huan-jing-bian-liang" tabindex="-1">设置环境变量 <a class="header-anchor" href="#she-zhi-huan-jing-bian-liang" aria-label="Permalink to &quot;设置环境变量&quot;">​</a></h3><p>以下两条命令效果一样的，区别在于系统查找路径的顺序。添加路径后，可以运行 <code>echo $PATH</code> 查看路径</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:/path/to/your/dir       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加到 PATH 末尾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/path/to/your/dir:$PATH       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加到 PATH 开头</span></span></code></pre></div><blockquote><p>注意，如果「添加」环境变量，一定要把当前的环境变量也添加进去 (也就是 <code>$PATH</code>)，再加上新的路径 <code>/path/to/your/dir</code>，并用 <code>:</code> 分割，否则会导致原来的环境变量失效。</p></blockquote><p>例如 <code>PATH</code> 中包含了两个 python 路径：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PATH</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/bin/python:/home/ubuntu/miniconda3/bin/python</span></span></code></pre></div><p>那么这时候，运行 python 先找到系统的 <code>/usr/bin/python</code></p><p>同时，也可以新建变量供其他程序使用，例如设置 <code>OpenCV_DIR</code> 供 CMake 编译查找使用</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OpenCV_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/program/opencv-4.5.5</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenCV_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$OpenCV_HOME/lib/cmake/opencv4</span></span></code></pre></div><h3 id="huan-jing-bian-liang-de-zuo-yong-yu" tabindex="-1">环境变量的作用域 <a class="header-anchor" href="#huan-jing-bian-liang-de-zuo-yong-yu" aria-label="Permalink to &quot;环境变量的作用域&quot;">​</a></h3><ul><li><strong>终端作用域</strong></li></ul><p>在当前终端下，直接添加环境变量，只对当前终端生效，退出终端后失效</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME/program/jdk-17.0.2.jdk/Contents/Home</span></span></code></pre></div><ul><li><strong>当前用户作用域</strong> <span id="env-var-for-user"></span></li></ul><p>编辑用户目录下的 <code>~/.bashrc</code> 文件，仅对当前用户有效</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span></code></pre></div><p>添加环境变量</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME/program/jdk-17.0.2.jdk/Contents/Home</span></span></code></pre></div><p>然后重启终端或者运行命令激活：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span></code></pre></div><blockquote><ul><li><code>~</code> 与 <code>$HOME</code> 变量的值一致，表示当前用户目录</li><li><code>.bashrc</code> 文件指的是 bash 的配置文件，如果系统使用的是其他 shell ，例如使用 zsh 应该修改 <code>.zshrc</code></li></ul></blockquote><ul><li><strong>全部用户作用域</strong></li></ul><p>编辑系统目录下的 <code>/etc/profile</code> 文件，流程和一致<a href="#env-var-for-user">当前用户作用域</a>，只是作用范围不一样</p><h3 id="te-shu-huan-jing-bian-liang-pathld_library_pathlibrary_path" tabindex="-1">特殊环境变量 PATH/LD_LIBRARY_PATH/LIBRARY_PATH <a class="header-anchor" href="#te-shu-huan-jing-bian-liang-pathld_library_pathlibrary_path" aria-label="Permalink to &quot;特殊环境变量 PATH/LD_LIBRARY_PATH/LIBRARY_PATH&quot;">​</a></h3><p>Linux 系统中有三个特殊的环境变量，分别是 <code>PATH</code>、<code>LD_LIBRARY_PATH</code> 和 <code>LIBRARY_PATH</code>，它们的作用分别是：</p><ul><li><code>PATH</code>：指定可执行程序的查找路径，通常指向 <code>bin</code> 目录</li><li><code>LD_LIBRARY_PATH</code>：指定动态链接库的查找路径，通常指向 <code>lib</code>/<code>bin</code> 目录，取决于库的开发者如何组织自己的库目录</li><li><code>LIBRARY_PATH</code>：指定静态链接库的查找路径，通常指向 <code>lib</code> 目录</li></ul><p>例如对于 CUDA，添加如下环境变量后就可以执行 <code>nvcc</code> 命令</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:/usr/local/cuda-12.0/bin</span></span></code></pre></div><p>添加如下环境变量后就可以编译 CUDA 程序，并在运行时查找到对应的动态链接库</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH/usr/local/cuda-12.0/lib64</span></span></code></pre></div><h3 id="shua-xin-huan-jing-bian-liang" tabindex="-1">刷新环境变量 <a class="header-anchor" href="#shua-xin-huan-jing-bian-liang" aria-label="Permalink to &quot;刷新环境变量&quot;">​</a></h3><p>通常会使用 <code>source ~/.bashrc</code> 来刷新环境变量，但是这种方法实际上是拼接或添加 (append) 环境变量</p><p>如果希望真正刷新 (reload/refresh) ，应该使用 <code>exec -l $shell</code> 以新的进程登录当前shell （替换当前进程），意味着重新读取shell profile，在读取的过程中仍然是执行了完整的shell profile 。其中，<code>$shell</code> 是当前 shell 的路径，例如 <code>/bin/bash</code> 或者 <code>/bin/zsh</code> 等等。</p><blockquote><p><a href="https://www.zhihu.com/question/517101428/answer/3042299744" target="_blank" rel="noreferrer">校招中的“熟悉linux操作系统”一般是指达到什么程度？ - BppleMan的回答 - 知乎</a></p></blockquote><h3 id="ge-ren-ding-yi-de-fei-chang-you-yong-de-huan-jing-bian-liang" tabindex="-1">个人定义的非常有用的环境变量 <a class="header-anchor" href="#ge-ren-ding-yi-de-fei-chang-you-yong-de-huan-jing-bian-liang" aria-label="Permalink to &quot;个人定义的非常有用的环境变量&quot;">​</a></h3><h4 id="guan-yu-shen-du-xue-xi-de-huan-jing-bian-liang" tabindex="-1">关于深度学习的环境变量 <a class="header-anchor" href="#guan-yu-shen-du-xue-xi-de-huan-jing-bian-liang" aria-label="Permalink to &quot;关于深度学习的环境变量&quot;">​</a></h4><p>这一段代码可以放在 <code>~/.bashrc</code> 中，用于设置 CUDA、cuDNN 和 TensorRT 的环境变量。需要自行根据自己的版本修改：</p><ul><li><code>CUDA_VERSION</code>：CUDA 的版本</li><li><code>CUDNN_HOME</code>：cuDNN 的路径</li><li><code>TENSORRT_HOME</code>：TensorRT 的路径</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Linux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ------ CUDA ------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CUDA_VERSION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11.8</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CUDA_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/usr/local/cuda-\${CUDA_VERSION}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:$CUDA_HOME/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH:$CUDA_HOME/lib64</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\${CUDA_HOME}/targets/include:$CPATH</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\${CUDA_HOME}/targets/x86_64-linux/include:$CPATH</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CPATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/usr/include/x86_64-linux-gnu/NvInfer.h:$CPATH</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ------ cuDNN ------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CUDNN_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME/program/cudnn-linux-x86_64-8.9.0.131_cuda11-archive</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CUDNN_LIBRARY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDNN_HOME/lib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CUDNN_INCLUDE_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CUDNN_HOME/include</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH:$CUDNN_LIBRARY</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$CUDNN_HOME/lib64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ------ TensorRT ------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TENSORRT_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME/program/TensorRT-8.6.1.6</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LD_LIBRARY_PATH:$TENSORRT_HOME/lib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:$TENSORRT_HOME/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span></code></pre></div><p>其中，<code>if [ &quot;$(uname)&quot; = &quot;Linux&quot; ];</code> 是为了判断是不是 MacOS ，因此这段代码完全可以放在 MacOS 的 <code>~/.zshrc</code> 中，只是 MacOS 下没有 CUDA 和 cuDNN 环境变量。这么做是为了能在不同 MacOS/Linux 下使用同一份配置文件。</p><p>在 CUDA 大版本不出现重大变化的情况下，以上的环境配置应该总是有效的；但是对于 cuDNN 和 TensorRT，由于版本更新较快，需要根据自己的版本进行修改。</p><h2 id="yong-hu-he-yong-hu-zu" tabindex="-1">🧑🏻‍💻 用户和用户组 <a class="header-anchor" href="#yong-hu-he-yong-hu-zu" aria-label="Permalink to &quot;🧑🏻‍💻 用户和用户组&quot;">​</a></h2><h3 id="xin-zeng-yong-hu" tabindex="-1">新增用户 <a class="header-anchor" href="#xin-zeng-yong-hu" aria-label="Permalink to &quot;新增用户&quot;">​</a></h3><p>当我们需要在系统中添加用户🧑🏻‍💻时，可以通过下面的命令快速添加(记得修改 <code>USERNAME</code> 变量)</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # change this variable for user</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/bash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${USERNAME}</span></span></code></pre></div><p>然后执行命令 <code>passwd</code> 修改密码</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> passwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \${USERNAME}</span></span></code></pre></div><p><code>useradd</code> 命令还有其他一些参数可以进一步控制新增用户</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-u </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UID]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-g </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GROUP]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-G </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GROUP]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-d </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DIR]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-mM] </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [-c </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;comment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [-r] [-s SHELL] [-e YYYY-MM-DD] [-f INACTIVE] </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">USERNAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><code>-u</code>: 指定用户的 UID，一般不要小于 500</li><li><code>-d</code>: 指定用户的主目录(绝对路径)，例如 <code>/home/userA</code></li><li><code>-g</code>: 指定用户的初始组名。一般以和用户名相同的组作为用户的初始组，在创建用户时会默认建立初始组</li><li><code>-G</code>: 指定用户的附加组。我们把用户加入其他组，一般都使用附加组</li><li><code>-s</code>: 指定用户的登录 Shell，默认为 <code>-s /bin/bash</code></li><li><code>-m</code>: 建立用户时强制建立用户目录。在建立系统用户时，该选项是默认的；</li><li><code>-e</code>: 指定用户的失效日期，格式为 <code>-e YYYY-MM-DD</code>。也就是 <code>/etc/shadow</code> 文件的第八个字段；</li><li><code>-f</code>: 指定用户的失效时长，经过 <code>INACTIVE</code> 天后该账户失效</li><li><code>-r</code>: 创建系统用户，也就是 UID 在 1~499 之间，供系统程序使用的用户。由于系统用户主要用于运行系统所需服务的权限配置，因此系统用户的创建默认不会创建主目录</li></ul><p>实际上，可以简单通过 <code>useradd &lt;USERNAME&gt;</code> 来创建用户，并且会使用默认配置。默认配置存储在文件 <code>/etc/default/useradd</code> 中，可以通过命令 <code>useradd -D</code> 查看或直接查看该文件</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GROUP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 默认用户组，即 users</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 默认在该目录下创建用户目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INACTIVE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 密码失效日(天数)，\`/etc/shadow\` 的第七个字段，-1 表示永远不会失效</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXPIRE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 账户失效日(日期)，\`/etc/shadow\` 的第八个字段</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SHELL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/sh</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 用户默认使用的 shell</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SKEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/skel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 创建用户目录的参考目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CREATE_MAIL_SPOOL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">no</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 是否为使用者建立邮箱</span></span></code></pre></div><p>使用命令 <code>useradd -D [options] &lt;param&gt;</code> 可以修改配置文件(<code>&lt;param&gt;</code> 需要自行修改)</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HOM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EXPIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">INACTIV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GROU</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">P</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 例如修改默认 shell</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/bash</span></span></code></pre></div><h2 id="dotfiles" tabindex="-1">Dotfiles <a class="header-anchor" href="#dotfiles" aria-label="Permalink to &quot;Dotfiles&quot;">​</a></h2><p>Dotfiles 指的是以 <code>.</code> 开头的文件或者目录，例如 <code>.bashrc</code>、<code>.zshrc</code>、<code>.vimrc</code> 等等。这些文件通常存放在用户目录下，例如 <code>/home/ubuntu/.bashrc</code>。当然了，Windows下也有类似的文件，例如 <code>C:\\Users\\&lt;your_name&gt;\\.ssh</code>。</p><p>这些文件通常用来存放「用户的配置信息」，例如 <code>~/.bashrc</code>/<code>~/.zshrc</code> 用来存放 bash/zsh 的配置信息。</p><p>这些文件通常是隐藏的，需要通过 <code>ls -a</code> 命令才能看到，或者在文件管理器中，解除隐藏。mac 下可以 <code>command+shift+.</code> 显示/隐藏 Dotfiles。</p><p><a href="https://www.freecodecamp.org/news/dotfiles-what-is-a-dot-file-and-how-to-create-it-in-mac-and-linux/" target="_blank" rel="noreferrer">Dotfiles – What is a Dotfile and How to Create it in Mac and Linux</a></p><hr><p><span id="sync-zshrc-to-icloud"></span></p><p>✅ 这里有一个针对 MacOS 的实用技巧，通过云端同步 Dotfiles，以 iCloud 为例（请阅读以下完之后再进行操作）：</p><p>当前用户下的 iCloud 的路径为 <code>&quot;$HOME/Library/Mobile Documents/com~apple~CloudDocs&quot;</code> （iCloud 的路径有空格，需要加引号）</p><ul><li><strong>创建 iCloud 的<code>.zshrc</code> 文件</strong></li></ul><p>如果 iCloud 中没有 <code>.zshrc</code> 文件，可以通过下面的命令将本地的 Dotfiles 复制到 iCloud 中</p><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/Library/Mobile Documents/com~apple~CloudDocs/.zshrc&quot;</span></span></code></pre></div><p>这样，<code>.zshrc</code> 就存储在了 iCloud 中，可以在其他设备上同步。</p><ul><li><strong>从 iCloud 同步 <code>.zshrc</code> 文件至本地</strong></li></ul><p>当拥有了一个新设备，只需要将本地的 <code>~/.zshrc</code> 删除，并且新建一个软连接，将本地的 <code>~/.zshrc</code> 指向 iCloud 中的 <code>~/.zshrc</code>，这样就可以实现多个设备中开发环境的同步了。</p><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc.bak</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 备份本地默认的 .zshrc 防止丢失</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/Library/Mobile Documents/com~apple~CloudDocs/.zshrc&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre></div><ul><li><strong>新建 ICLOUD 变量</strong></li></ul><p>为了方便，在 <code>~/.zshrc</code> 中添加一个环境变量 <code>ICLOUD</code>，指向 iCloud 的路径，便于快速使用，而不需要记住长长的路径</p><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ICLOUD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/Library/Mobile Documents/com~apple~CloudDocs&quot;</span></span></code></pre></div><p>上述的方法同样可以用于其他云端存储，例如 Dropbox、OneDrive</p><h2 id="hou-tai-yun-xing" tabindex="-1">后台运行 <a class="header-anchor" href="#hou-tai-yun-xing" aria-label="Permalink to &quot;后台运行&quot;">​</a></h2><p><a href="https://zhuanlan.zhihu.com/p/344554760" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/344554760</a></p><h3 id="ding-shi-ren-wu" tabindex="-1">定时任务 <a class="header-anchor" href="#ding-shi-ren-wu" aria-label="Permalink to &quot;定时任务&quot;">​</a></h3><p>linux 内置的 cron 进程能定时运行任务。<code>crontab</code> 命令是 cron table 的简写，它是 cron 的配置文件，也可以叫它作业列表。</p><p>相关配置文件在如下位置：</p><ul><li><code>/var/spool/cron/</code> 目录下存放的是每个用户包括 root 的 crontab任务，每个任务以创建者的名字命名</li><li><code>/etc/crontab</code> 这个文件负责调度各种管理和维护任务。</li><li><code>/etc/cron.d/</code> 这个目录用来存放任何要执行的crontab文件或脚本。</li><li>我们还可以把脚本放在 <code>/etc/cron.hourly</code> , <code>/etc/cron.daily</code> , <code>/etc/cron.weekly</code> , <code>/etc/cron.monthly</code> 目录中，让它每小时/天/星期、月执行一次。</li></ul><p><code>crontab</code> 命令如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-u </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">username]　　　　//省略用户表表示操作当前用户的crontab</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (编辑工作表)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -l</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (列出工作表里的命令)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (删除工作作)</span></span></code></pre></div><p>我们用 <code>crontab -e</code> 进入当前用户的工作表编辑，是常见的 vim 界面。每行是一条命令。</p><p><code>crontab</code> 的命令构成为 <code>时间 + 动作</code>，其时间有分、时、日、月、周五种，操作符有</p><ul><li><code>*</code> 取值范围内的所有数字</li><li><code>/</code> 每过多少个数字</li><li><code>-</code> 从X到Z</li><li><code>,</code> 散列数字</li></ul><p><code>m h dom mon dow command</code></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> command         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每分钟执行一次 command</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> command     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每分钟执行一次 command</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3,15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 每小时的第3和第15分钟执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3,15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8-11</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 在上午8点到11点的第3和第15分钟执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3,15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8-11</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 每隔两天的上午8点到11点的第3和第15分钟执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3,15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8-11</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 每周一上午8点到11点的第3和第15分钟执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">30</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/init.d/smb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 每晚的21:30重启smb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 6,0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/init.d/smb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 每周六、周日的1 : 10重启smb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/init.d/smb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 每星期六的晚上11 : 00 pm重启smb</span></span></code></pre></div><table tabindex="0"><thead><tr><th>特殊字符</th><th>含义</th></tr></thead><tbody><tr><td><code>@reboot</code></td><td>在每次启动时运行一次</td></tr><tr><td><code>@yearly</code></td><td>每年运行一次 <code>0 0 1 1 *</code></td></tr><tr><td><code>@annually</code></td><td>与@yearly用法一致</td></tr><tr><td><code>@monthly</code></td><td>每月运行一次 <code>0 0 1 * *</code></td></tr><tr><td><code>@weekly</code></td><td>每周运行一次 <code>0 0 * * 0</code></td></tr><tr><td><code>@daily</code></td><td>每天运行一次 <code>0 0 * * *</code></td></tr><tr><td><code>@midnight</code></td><td>与 <code>@daily</code> 用法一致</td></tr><tr><td><code>@hourly</code></td><td>每小时运行一次 <code>0 * * * *</code></td></tr></tbody></table><h2 id="ci-pan" tabindex="-1">💾 磁盘 <a class="header-anchor" href="#ci-pan" aria-label="Permalink to &quot;💾 磁盘&quot;">​</a></h2><h3 id="cha-kan-ci-pan-kong-jian" tabindex="-1">查看磁盘空间 <a class="header-anchor" href="#cha-kan-ci-pan-kong-jian" aria-label="Permalink to &quot;查看磁盘空间&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/zhr</span></span></code></pre></div><p>查看当前或者指定目录占用空间，并可以指定查询子目录深度（否则就递归查看全部文件），<code>-h</code> 则以 <code>K M G</code> 为单位进行显示</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">du</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">du</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --max-depth=1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">du</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --max-depth=1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home</span></span></code></pre></div><h2 id="gong-xiang-wen-jian-jia" tabindex="-1">📁 共享文件夹 <a class="header-anchor" href="#gong-xiang-wen-jian-jia" aria-label="Permalink to &quot;📁 共享文件夹&quot;">​</a></h2><h3 id="samba-fang-an" tabindex="-1">samba 方案 <a class="header-anchor" href="#samba-fang-an" aria-label="Permalink to &quot;samba 方案&quot;">​</a></h3><p>安装</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> samba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssh-server</span></span></code></pre></div><p>samba 的配置文件在 <code>/etc/samba/smb.conf</code> ，在编辑之前先备份配置文件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.bak</span></span>
<span class="line"><span>sudo nano /etc/samba/smb.conf</span></span></code></pre></div><p>修改完后重启 samba 服务</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> smbd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nmbd</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/init.d/smbd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/init.d/nmbd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span></code></pre></div><p>不知道从什么时候开始用户不再能使用系统本地帐号登录了，必须要有个 samba 帐号才行。所以要为系统用户新增 samba 帐号，比如，已经有一个用户叫 <code>user1</code>，现在给 <code>user1</code> 开通 samba 帐号：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> smbpasswd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # add 添加用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> smbpasswd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # enable 激活用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> smbpasswd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # disable 禁用用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> smbpasswd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 删除用户</span></span></code></pre></div><p>列出 samba 用户列表，读取 <code>passdb.tdb</code> 数据库文件</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pdbedit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pdbedit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Lv</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 详细信息</span></span></code></pre></div><p>添加共享目录参数格式如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[datasets]  # 共享名称</span></span>
<span class="line"><span>   comment = Do not  arbitrarily modify the datasets</span></span>
<span class="line"><span>   path = /opt/datasets     # 共享路径</span></span>
<span class="line"><span>   browseable = yes         # 是否在网上邻居可见，可被其他人看到资源名称（非内容）</span></span>
<span class="line"><span>   valid users = test1,@bob # [可选] @+组名 表示可以加入一个组访问权限</span></span>
<span class="line"><span>   invalid users = test2    # [可选] 禁止访问该共享的用户</span></span>
<span class="line"><span>   read only = yes          # 只读权限，否则为 no</span></span>
<span class="line"><span>   create mask = 0664       # 新建文件的权限为 664</span></span>
<span class="line"><span>   directory mask = 0775    # 新建目录的权限为 775</span></span>
<span class="line"><span>   guest ok = no            # 是否所有人可查看，等效于 public = no</span></span></code></pre></div><p>特殊的共享</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[homes]</span></span>
<span class="line"><span>  comment = Home Directories</span></span>
<span class="line"><span>  browseable = no</span></span>
<span class="line"><span>  read only = no</span></span>
<span class="line"><span>  valid users = %S # %s  是指登陆用户可以访问 </span></span>
<span class="line"><span>  ; valid users = MYDOMAIN\\%S</span></span>
<span class="line"><span>  create mask = 0755 #建议将权限修改成0755，这样其它用户只是不能修改</span></span>
<span class="line"><span>  directory mask = 0755</span></span></code></pre></div><p>参考：<a href="https://www.cnblogs.com/reachos/p/8716415.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/reachos/p/8716415.html</a></p><h2 id="wen-ben-bian-ji-qi" tabindex="-1">🖋️ 文本编辑器 <a class="header-anchor" href="#wen-ben-bian-ji-qi" aria-label="Permalink to &quot;🖋️ 文本编辑器&quot;">​</a></h2><h3 id="nano" tabindex="-1">nano <a class="header-anchor" href="#nano" aria-label="Permalink to &quot;nano&quot;">​</a></h3><ul><li>Ctrl+G，显示帮助文本</li><li>Ctrl+O，保存当前文件</li><li>Ctrl+R，读取其他文件并插入光标位置</li><li>Ctrl+Y，跳至上一屏幕</li><li>Ctrl+K，剪切当前一行</li><li>Ctrl+C，显示光标位置</li><li>Ctrl+X，退出编辑文本</li><li>Ctrl+J，对其当前段落（以空格为分隔符）</li><li>Ctrl+W，搜索文本位置</li><li>Ctrl+V，跳至下一屏幕</li><li>Ctrl+U，粘贴文本至光标处</li><li>Ctrl+T，运行拼写检查</li><li>Ctrl+_，跳转到某一行</li><li>ALT+U，撤销</li><li>ALT+E，重做</li><li>ALT+Y, 语法高亮</li><li>ALT+#，显示行号</li></ul><h2 id="yun-wei" tabindex="-1">运维 <a class="header-anchor" href="#yun-wei" aria-label="Permalink to &quot;运维&quot;">​</a></h2><h3 id="deng-lu-ti-shi-xin-xi" tabindex="-1">登陆提示信息 <a class="header-anchor" href="#deng-lu-ti-shi-xin-xi" aria-label="Permalink to &quot;登陆提示信息&quot;">​</a></h3><p>登录信息可以修改三个文件：</p><ul><li><code>/etc/issue</code> 本地登陆显示的信息，本地登录前</li><li><code>/etc/issue.net</code> 网络登陆显示的信息，登录后显示，需要由sshd配置</li><li><code>/etc/motd</code> 常用于通告信息，如计划关机时间的警告等，登陆后的提示信息</li></ul><p><code>/etc/update-motd.d/</code> 目录下包含了登陆的提示信息</p><blockquote><p>文件的第一行必须是 <code>#!/bin/sh</code> 或者 <code>#!/bin/bash</code> , 这是告诉系统要用相关的shell解析该文件</p></blockquote><p><code>sudo chmod 755 60-my-welcome-info</code></p><p>Ubuntu的登陆和欢迎信息控制/etc/issue和/etc/motd。/etc/issue与/etc/motd区别在于：当一个网络用户或通过串口登录系统 上时,/etc/issue的文件内容显示在login提示符之前,而/etc/motd内容显示在用户成功登录系统之后。</p><p>Ubuntu 与别的 Linux 不同，直接修改 /etc/motd 文件重登录后无效。因为这里 /etc/motd 是一个符号链接，指向 /var/run/motd，应该是一个启动后在生成的文件。</p><p>使用ssh或console登陆成功后，ubuntu会顺序执行/etc/update-motd.d中的脚本</p><p>issue.net文件： （只针对网络用户）--若通过远程本文设备（如通过ssh或telnet等）登录，则显示该文件的内容。使用ssh登录时，会不会显示issue信息由sshd服务的sshd_config的Banner属性配置决定；</p><h2 id="wen-jian-xi-tong" tabindex="-1">🗃️ 文件系统 <a class="header-anchor" href="#wen-jian-xi-tong" aria-label="Permalink to &quot;🗃️ 文件系统&quot;">​</a></h2><h2 id="yu-fu-wu-qi-zhi-jian-de-wen-jian-chuan-shu" tabindex="-1">与服务器之间的文件传输 <a class="header-anchor" href="#yu-fu-wu-qi-zhi-jian-de-wen-jian-chuan-shu" aria-label="Permalink to &quot;与服务器之间的文件传输&quot;">​</a></h2><h2 id="scp" tabindex="-1">scp <a class="header-anchor" href="#scp" aria-label="Permalink to &quot;scp&quot;">​</a></h2><p>scp -c blowfish</p><p>试试这个，有惊喜。问题出在加密算法上，默认的加密算法最快也就那个水平，如果是内网传输，可以牺牲一下加密强度换速度。</p><p><a href="https://www.zhihu.com/question/442008347/answer/1707333952" target="_blank" rel="noreferrer">Linux 下两台服务器间如何全速传输文件？ - Zign的回答 - 知乎</a></p><p>切换算法</p><p>scp默认是使用AES-128加密算法加密数据传输,你可以根据安全和速度的具体需求使用参数-c(cipher)来换加密算法比如Blowfish或RC4。</p><p>scp -c blowfish some-file username@remotehost:~ scp -c arcfour some-file username@remotehost:~</p><p>RC4比Blowfish更快但安全性稍低，具体使用那个算法完全取决于你。你也可以使用Tripe-DES来增强安全</p><p>scp -c 3des some-file username@remotehost:~</p><p>压缩</p><p>你也可以使用参数-C(大写compress)来压缩后传输，但需要自己衡量因为压缩和解压都会给cpu增加负担，除非网络速度很低才考虑这种方式</p><p>scp -C some-file username@remotehost:~</p><p><a href="https://eternalcenter.com/ssh-algorithms-ciphers-no-crypto-policies-rhel-8/" target="_blank" rel="noreferrer">https://eternalcenter.com/ssh-algorithms-ciphers-no-crypto-policies-rhel-8/</a></p><p>查看支持的加密算法 <code>man ssh_config</code> <code>ssh -Q cipher</code></p><p><a href="mailto:chacha20-poly1305@openssh.com" target="_blank" rel="noreferrer">chacha20-poly1305@openssh.com</a><a href="mailto:,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com" target="_blank" rel="noreferrer">,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com</a><a href="mailto:,aes256-gcm@openssh.com" target="_blank" rel="noreferrer">,aes256-gcm@openssh.com</a></p><p>aes128-ctr aes192-ctr aes256-ctr <a href="mailto:aes128-gcm@openssh.com" target="_blank" rel="noreferrer">aes128-gcm@openssh.com</a><a href="mailto:aes256-gcm@openssh.com" target="_blank" rel="noreferrer">aes256-gcm@openssh.com</a><a href="mailto:chacha20-poly1305@openssh.com" target="_blank" rel="noreferrer">chacha20-poly1305@openssh.com</a></p><h2 id="ftp-fu-wu-qi-da-jian" tabindex="-1">ftp 服务器搭建 <a class="header-anchor" href="#ftp-fu-wu-qi-da-jian" aria-label="Permalink to &quot;ftp 服务器搭建&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vsftpd</span></span></code></pre></div><p>vsftpd服务将在安装过程完成后自动启动。通过打印服务状态进行验证：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vsftpd</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置开机启动并启动ftp服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vsftpd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vsftpd</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#查看其运行状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vsftpd</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#重启服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vsftpd</span></span></code></pre></div><p>1.FTP访问</p><p>我们仅允许本地用户访问FTP服务器，找到anonymous_enable和local_enable指令，并验证您的配置是否与以下行匹配：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/vsftpd.conf</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">anonymous_enable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">local_enable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">YES</span></span></code></pre></div><p>2.启用上传</p><p>取消注释write_enable设置以允许对文件系统进行更改，例如上载和删除文件。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/vsftpd.conf</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">write_enable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">YES</span></span></code></pre></div><p>被动FTP连接</p><p><a href="https://www.cnblogs.com/sll0917/p/16557685.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/sll0917/p/16557685.html</a></p><h2 id="chang-yong-jiao-ben" tabindex="-1">🛠️ 常用脚本 <a class="header-anchor" href="#chang-yong-jiao-ben" aria-label="Permalink to &quot;🛠️ 常用脚本&quot;">​</a></h2><span id="useful-scripts"></span><h2 id="dai-bu-chong" tabindex="-1">待补充 <a class="header-anchor" href="#dai-bu-chong" aria-label="Permalink to &quot;待补充&quot;">​</a></h2>`,178)]))}const g=i(t,[["render",l]]);export{c as __pageData,g as default};
