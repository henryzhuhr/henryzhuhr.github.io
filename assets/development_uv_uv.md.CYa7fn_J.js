import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.ko2zIC2c.js";const c=JSON.parse('{"title":"UV","description":"","frontmatter":{"outline":"deep","date":"2025-08-09T00:00:00.000Z","tags":["Software Development","Python"]},"headers":[],"relativePath":"development/uv/uv.md","filePath":"development/uv/uv.md","lastUpdated":1754717252000}'),e={name:"development/uv/uv.md"};function l(h,s,p,k,r,o){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="uv" tabindex="-1">UV <a class="header-anchor" href="#uv" aria-label="Permalink to &quot;UV&quot;">​</a></h1><p><a href="https://docs.astral.sh/uv/" target="_blank" rel="noreferrer">UV</a> 是一个基于 Rust 的超快的、现代化的 Python 包和项目管理器。</p><h2 id="kai-fa-huan-jing" tabindex="-1">开发环境 <a class="header-anchor" href="#kai-fa-huan-jing" aria-label="Permalink to &quot;开发环境&quot;">​</a></h2><h3 id="vscode-cha-jian-ruff" tabindex="-1">VSCode 插件: Ruff <a class="header-anchor" href="#vscode-cha-jian-ruff" aria-label="Permalink to &quot;VSCode 插件: Ruff&quot;">​</a></h3><p>在 VSCode 中，可以使用 uv 配合 <a href="https://docs.astral.sh/ruff/" target="_blank" rel="noreferrer">ruff</a> 来进行 Python 开发，安装插件 <a href="https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff" target="_blank" rel="noreferrer">Ruff</a> 即可。</p><h2 id="issues" tabindex="-1">❓ Issues <a class="header-anchor" href="#issues" aria-label="Permalink to &quot;❓ Issues&quot;">​</a></h2><h3 id="numpyversion-restriction" tabindex="-1">NumpyVersion restriction <a class="header-anchor" href="#numpyversion-restriction" aria-label="Permalink to &quot;NumpyVersion restriction&quot;">​</a></h3><p>大多数库都对 numpy 的版本进行限制，通常是低于 <code>2.x</code> 的版本</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">requires-python = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=3.10, &lt;3.13&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dependencies = [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;numpy&gt;=1.23,&lt;2; python_version &gt;= &#39;3.10&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;numpy&lt;1.23; python_version &lt; &#39;3.10&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="tensorrt-llm-fails-to-work-with-high-versions-of-transformers" tabindex="-1">Tensorrt-LLM fails to work with high versions of transformers <a class="header-anchor" href="#tensorrt-llm-fails-to-work-with-high-versions-of-transformers" aria-label="Permalink to &quot;Tensorrt-LLM fails to work with high versions of transformers&quot;">​</a></h3><p>当安装 <code>tensorrt-llm</code> 的时候可能会和高版本的 <code>transformers</code> 冲突，特别是使用 <code>uv add</code> 的时候无法感知这种冲突，会直接报错，但是当使用 <code>uv pip install</code> 的时候就可以检测到这种依赖冲突：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark has-diff has-focused-lines vp-code" tabindex="0"><code><span class="line has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tensorrt-llm</span></span>
<span class="line has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tensorrt==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.11.0.33</span></span>
<span class="line has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tensorrt-cu12==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.11.0.33</span></span>
<span class="line has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tensorrt-cu12-bindings==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.11.0.33</span></span>
<span class="line has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tensorrt-cu12-libs==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.11.0.33</span></span>
<span class="line has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tensorrt-llm==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.21.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tiktoken==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.11.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torchprofile==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0.4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torchvision==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.22.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tornado==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6.5.2</span></span>
<span class="line diff remove has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformers==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4.54.1</span></span>
<span class="line diff add has-focus"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformers==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4.51.3</span></span></code></pre></div><p>因此，当产生未知的版本冲突的时候，可以尝试使用 <code>uv pip install</code> 安装，查看是否因为版本依赖而安装失败，然后修改冲突的版本，例如将上述依赖冲突的高版本 <code>&quot;transformers[torch]&gt;=4.54&quot;</code> 降低到 <code>&quot;transformers[torch]&gt;=4.51&quot;</code>，参考如下</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">requires-python = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=3.10, &lt;3.13&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dependencies = [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;transformers[torch]&gt;=4.51&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optional-dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tensorrt = [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # &quot;tensorrt&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # &quot;tensorrt-cu12&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # &quot;tensorrt-cu12-bindings&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # &quot;tensorrt-cu12-libs&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;tensorrt-llm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tensorrt = { index = &quot;nvidia&quot; }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tensorrt-cu12 = { index = &quot;nvidia&quot; }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tensorrt-cu12-bindings = { index = &quot;nvidia&quot; }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tensorrt-cu12-libs = { index = &quot;nvidia&quot; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tensorrt-llm = { index = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nvidia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nvidia&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://pypi.nvidia.com/&quot;</span></span></code></pre></div><blockquote><p><code>tensorrt</code> 相关的包需要使用 <code>https://pypi.nvidia.com/</code> 作为索引</p></blockquote><p>这个问题可以参考：</p><ul><li><a href="https://github.com/astral-sh/uv/issues/9763" target="_blank" rel="noreferrer"><em>Issue #9763</em></a>: Can&#39;t run tensorrt_llm with uv</li></ul>`,17)]))}const E=i(e,[["render",l]]);export{c as __pageData,E as default};
