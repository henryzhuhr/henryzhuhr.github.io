import{_ as e,o as s,c as a,a as n}from"./app.e2a6bb87.js";const i={},t=n(`<ol><li>\u66F4\u6362\u540E\u7AEF\u4E3A\u201CGloo\u201D\uFF0C\u6B63\u5E38\u6267\u884Cshell\u547D\u4EE4\u8FD0\u884C\u7A0B\u5E8F\u3002</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>torch.distributed.init_process_group<span class="token punctuation">(</span>backend<span class="token operator">=</span><span class="token string">&quot;Gloo&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> torch.distributed.launch <span class="token parameter variable">--nproc_per_node</span><span class="token operator">=</span><span class="token number">7</span> <span class="token parameter variable">--master_port</span> <span class="token number">8888</span> main.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u4ECD\u65E7\u4F7F\u7528\u201CNCCL\u201D\u540E\u7AEF\uFF0C\u4F46\u9700\u8981\u66F4\u6539\u73AF\u5883\u53D8\u91CF\uFF0C\u5728shell\u547D\u4EE4\u524D\u52A0\u5165\u7981\u7528P2P\u3002</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>torch.distributed.init_process_group<span class="token punctuation">(</span>backend<span class="token operator">=</span><span class="token string">&quot;NCCL&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>NCCL_P2P_DISABLE=1 python -m torch.distributed.launch --nproc_per_node=7 --master_port 8888 main.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u4ECD\u65E7\u4F7F\u7528\u201CNCCL\u201D\u540E\u7AEF\uFF0C\u4F46\u9700\u8981\u66F4\u6539\u73AF\u5883\u53D8\u91CF\uFF0C\u6C38\u4E45\u66F4\u6539\u73AF\u5883\u8BBE\u7F6E\uFF0C\u6B63\u5E38\u6267\u884Cshell\u547D\u4EE4\u8FD0\u884C\u7A0B\u5E8F\u3002</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>torch.distributed.init_process_group(backend=&quot;NCCL&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vim ~/.bashrc
export NCCL_P2P_DISABLE=1
source ~/.bashrc.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>python -m torch.distributed.launch --nproc_per_node=7 --master_port 8888 main.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4\u3001\u5EFA\u8BAE\u4F7F\u7528\u7B2C3\u4E2A\u65B9\u6848\uFF0C\u636E\u6211\u6D4B\u8BD5\uFF0CGloo\u540E\u7AEF\u6CA1\u6709NCCL\u540E\u7AEF\u901A\u4FE1\u901F\u5EA6\u5FEB\uFF0C\u7A0B\u5E8F\u8FD0\u884C\u901F\u5EA6NCCL\u8F83\u5FEB\u3002\u53E6\u5916\uFF0C\u6BCF\u6B21\u52A0\u4E0A\u4FEE\u6539\u73AF\u5883\u53D8\u91CF\u7684\u547D\u4EE4\u4E5F\u633A\u70E6\u7684\uFF0C\u4FEE\u6539bash\u73AF\u5883\u53D8\u91CF\u4E00\u52B3\u6C38\u9038\u3002</p><p>bug\u5206\u6790\uFF1A NCCL_P2P_DISABLE=1\u5C06\u7981\u7528GPU\u4E4B\u95F4\u76F4\u63A5\u901A\u4FE1\uFF08\u5982\u4F7F\u7528NVlink\u6216\u8005PCIe\uFF09\uFF0C\u9274\u4E8ENVDIA\u5B98\u7F51\u663E\u793AA30\u652F\u6301NVlink\u6216\u8005PCIe\uFF0C\u56E0\u6B64\u5224\u65AD\u53EF\u80FD\u662F\u786C\u4EF6\u6545\u969C\u6216\u8005\u662F\u8F6F\u4EF6\u7248\u672C\u4E0D\u5339\u914D\u5BFC\u81F4P2P\u901A\u4FE1\u53D7\u963B\uFF0C\u4F7F\u5F97\u8FDB\u7A0B\u963B\u585E\uFF0C\u7A0B\u5E8F\u6302\u8D77\u3002</p>`,12),l=[t];function r(d,o){return s(),a("div",null,l)}var p=e(i,[["render",r],["__file","\u591A\u5361\u8BAD\u7EC3.html.vue"]]);export{p as default};
