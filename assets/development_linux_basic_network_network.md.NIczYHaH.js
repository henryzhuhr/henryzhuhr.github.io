import{_ as a,c as i,o as e,ag as n}from"./chunks/framework.ko2zIC2c.js";const r=JSON.parse('{"title":"网络","description":"","frontmatter":{},"headers":[],"relativePath":"development/linux/basic/network/network.md","filePath":"development/linux/basic/network/network.md","lastUpdated":1744689004000}'),t={name:"development/linux/basic/network/network.md"};function p(l,s,h,o,d,c){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="wang-luo" tabindex="-1">网络 <a class="header-anchor" href="#wang-luo" aria-label="Permalink to &quot;网络&quot;">​</a></h1><h2 id="wang-luo-pei-zhi" tabindex="-1">网络配置 <a class="header-anchor" href="#wang-luo-pei-zhi" aria-label="Permalink to &quot;网络配置&quot;">​</a></h2><h3 id="dns" tabindex="-1">DNS <a class="header-anchor" href="#dns" aria-label="Permalink to &quot;DNS&quot;">​</a></h3><p>在 Linux 系统中，<code>/etc/resolv.conf</code> 文件是用来配置 DNS 解析器的设置文件，它包含了 DNS 服务器的地址以及其他 DNS 相关的配置信息。如果你想向 <code>/etc/resolv.conf</code> 文件中添加新的 <code>nameserver</code> 行，可以按照以下步骤操作：</p><p><strong>步骤 1: 备份原始文件</strong></p><p>在进行任何更改之前，最好先备份原始文件。这可以通过以下命令完成：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/resolv.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/resolv.conf.bak</span></span></code></pre></div><p><strong>步骤 2: 编辑文件</strong></p><p>使用文本编辑器打开 <code>/etc/resolv.conf</code> 文件，并添加新的 <code>nameserver</code> 行。你可以使用 <code>nano</code>、<code>vim</code> 或其他任何你喜欢的文本编辑器。这里以 <code>nano</code> 为例：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/resolv.conf</span></span></code></pre></div><p>在文件中添加新的 <code>nameserver</code> 行，例如：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nameserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.8.8.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nameserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.8.4.4</span></span></code></pre></div><p>这将添加 Google 的公共 DNS 服务器作为你的 DNS 服务器。</p><p>保存并关闭文件。</p><p><strong>注意事项</strong></p><p>需要注意的是，<code>/etc/resolv.conf</code> 文件在某些 Linux 发行版中可能会被动态生成，这意味着直接编辑文件可能会在下次重启或某些网络设置更改后丢失你的更改。为了避免这种情况，你可以采取以下两种方法之一：</p><ol><li><p><strong>修改 <code>/etc/systemd/resolved.conf</code></strong>： 如果你的系统使用 <code>systemd-resolved</code> 服务来管理 DNS 解析，你可以编辑 <code>/etc/systemd/resolved.conf</code> 文件来配置 DNS 服务器。首先，你需要禁用 <code>systemd-resolved</code> 的 DNS 缓存功能，并设置使用外部的 DNS 服务器。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/resolved.conf</span></span></code></pre></div><p>在文件中添加或更改以下行：</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Resolve]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DNS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=8.8.8.8</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DNS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=8.8.4.4</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=no</span></span></code></pre></div><p>保存并关闭文件。</p><p>然后重新加载 <code>systemd</code> 配置并重新启动 <code>systemd-resolved</code> 服务：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd-resolved</span></span></code></pre></div></li><li><p><strong>使用 <code>resolvectl</code> 命令</strong>： 如果你的系统支持 <code>resolvectl</code> 命令，你可以直接使用它来添加 DNS 服务器：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resolvectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.8.8.8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.8.4.4</span></span></code></pre></div><p>这里的 <code>eth0</code> 应该替换为你实际使用的网络接口名称。</p></li></ol><p><strong>步骤 3: 验证更改</strong></p><p>你可以使用 <code>cat</code> 命令查看 <code>/etc/resolv.conf</code> 文件的内容，以确保更改已经生效：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/resolv.conf</span></span></code></pre></div><p>你应该可以看到新的 <code>nameserver</code> 行。</p><p><strong>步骤 4: 测试 DNS 解析</strong></p><p>最后，你可以测试 DNS 解析是否正常工作：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nslookup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span></code></pre></div><p>如果一切正常，你应该能看到类似于以下的输出：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Server:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         8.8.8.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Address:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        8.8.8.8#53</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Non-authoritative</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> answer:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Addresses:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  93.184.216.34</span></span></code></pre></div><p>这样你就完成了向 <code>/etc/resolv.conf</code> 文件中添加新的 <code>nameserver</code> 行的过程。</p>`,27)]))}const g=a(t,[["render",p]]);export{r as __pageData,g as default};
